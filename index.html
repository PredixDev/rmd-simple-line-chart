<html>
    <head>
        <meta charset="UTF8">
        <script type="text/javascript" src="src/d3.js"></script>

        <script type="text/javascript" src="src/config.js"></script>
        <script type="text/javascript" src="src/scales.js"></script>
        <script type="text/javascript" src="src/axis.js"></script>
        <script type="text/javascript" src="src/gridlines.js"></script>

        <link rel="stylesheet" type="text/css" href="src/px-line-chart.css">

    </head>
    <body>

        <div style="float: left;">

            <script>

                var svg = d3.select("body").append("svg")
                    .attr("width", width)
                    .attr("height", height);

                addGridLines(svg, numCols, colSize, numRows, rowSize, width, height);
                addThresholdLine(svg, 38, width);
                addAxisBar(svg, colSize, height);
                addChartBorders(svg, width, height);
                addAxisLabel(svg, colSize, height);

                var line = d3.svg.line()
                    .x(function(d) { return xScale(d.date); })
                    .y(function(d) { return yScale(d.close); });

                var parseDate = d3.time.format("%d-%b-%y").parse;

                d3.tsv("data.tsv", function(error, data) {
                    if (error) throw error;

                    data.forEach(function(d) {
                        d.date = parseDate(d.date);
                        d.close = +d.close;
                    });

                    xScale.domain(d3.extent(data, function(d) { return d.date; }));
                    yScale.domain(d3.extent(data, function(d) { return d.close; }));

                    svg.append("path")
                        .datum(data)
                        .attr("class", "chartLine")
                        .attr("d", line);

                });


            </script>

        </div>

        <div style="float: right;">
            <svg width="283" height="150">

                <g class="layer">

                    <!-- horizontal grid lines -->
                    <line class="chartGrid" x1="0" x2="283" y1="19" y2="19" />
                    <line class="chartGrid" x1="0" x2="283" y1="38" y2="38" />
                    <line class="chartGrid" x1="0" x2="283" y1="57" y2="57" />
                    <line class="chartGrid" x1="0" x2="283" y1="76" y2="76" />
                    <line class="chartGrid" x1="0" x2="283" y1="95" y2="95" />
                    <line class="chartGrid" x1="0" x2="283" y1="114" y2="114" />
                    <line class="chartGrid" x1="0" x2="283" y1="133" y2="133" />


                    <line class="thresholdLine" x1="0" x2="283" y1="38" y2="38" />

                    <!-- vertical axis left bar --->
                    <rect class="axisBar" x="0" y="0" width="38" height="150"/>

                    <!-- vertical grid lines -->
                    <line class="chartGrid" x1="0" x2="0" y1="0" y2="150" />
                    <line class="chartGrid" x1="38" x2="38" y1="0" y2="150" />
                    <line class="chartGrid" x1="73" x2="73" y1="0" y2="150" />
                    <line class="chartGrid" x1="108" x2="108" y1="0" y2="150" />
                    <line class="chartGrid" x1="143" x2="143" y1="0" y2="150" />
                    <line class="chartGrid" x1="178" x2="178" y1="0" y2="150" />
                    <line class="chartGrid" x1="213" x2="213" y1="0" y2="150" />
                    <line class="chartGrid" x1="248" x2="248" y1="0" y2="150" />
                    <line class="chartGrid" x1="283" x2="283" y1="0" y2="150" />

                    <!-- top and bottom lines -->
                    <line class="chartBorder" x1="0" x2="283" y1="1" y2="1" />
                    <line class="chartBorder" x1="0" x2="283" y1="149" y2="149" />


                    <text class="axisLabel" x="7" y="42">100</text>

                    <polyline class="chartLine" points="
                        38,32
                        42,42
                        46,52
                        48,32
                        52,30
                        56,23
                        60,22
                        64,29
                        68,23
                        72,32
                        76,48
                        80,12
                        84,16
                        88,19
                        92,22
                        96,43
                        100,48
                        104,40
                        108,41
                        112,46
                        116,48
                        120,52
                        124,44
                        128,41
                        132,49
                        136,40
                        140,46
                        144,43
                        148,78
                        152,72
                        156,62
                        160,80
                        164,102
                        168,100
                        172,98
                        176,67
                        180,52
                        184,45
                        188,40
                        192,42
                        196,45
                        200,56
                        204,75
                        208,55
                        212,14
                        216,15
                        220,10
                        224,12
                        228,10
                        232,38
                        236,40
                        240,42
                        244,39
                        248,32
                        252,62
                        256,54
                        260,52
                        264,14
                        268,42
                        272,22
                        276,13
                        280,11
                        284,20
                    " />

                </g>

            </svg>
        </div>

    </body>
</html>
